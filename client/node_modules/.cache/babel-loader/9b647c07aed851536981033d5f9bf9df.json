{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gal\\\\Documents\\\\GitHub\\\\fullstackOpen3-Exercises\\\\client\\\\src\\\\Phonebook.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Notification from './components/Notification';\nimport Person from './components/Person';\nimport personService from './services/persons';\n\nfunction Phonebook() {\n  const [book, setBook] = useState([]);\n  const [name, setName] = useState();\n  const [number, setNumber] = useState();\n  const [showAll, setShowAll] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const fetch = async () => {\n    const {\n      data\n    } = await axios.get('/api/persons');\n    setBook(data);\n  }; //   useEffect(() => {\n  //     fetch();\n  //   }, [])\n\n\n  useEffect(() => {\n    personService.getAll().then(initialPersons => setBook(initialPersons)); // fetch();\n  }, []);\n\n  const addPerson = event => {\n    event.preventDefault();\n    const personObject = {\n      name: name,\n      date: new Date().toISOString(),\n      important: Math.random() > 0.5,\n      id: notes.length + 1\n    };\n  };\n\n  const handleDelete = e => {\n    axios.delete(`/api/persons/${e.target.id}`);\n    fetch();\n  };\n\n  const handleSubmit = async () => {\n    const checkPerson = book.find(person => person.name === name);\n\n    if (checkPerson) {\n      await axios.put(`/api/persons/${checkPerson.id}`, {\n        name,\n        number\n      });\n    } else {\n      await axios.post('/api/persons', {\n        name,\n        number\n      });\n    }\n\n    fetch();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, \"Phone Book\"), /*#__PURE__*/React.createElement(Notification, {\n    message: errorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, book.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \" \", item.id, \" \", item.name, \" \", item.number, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    id: item.id,\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 66\n    }\n  }, \"delete\")))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setName(e.target.value),\n    type: \"text\",\n    placeholder: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setNumber(e.target.value),\n    type: \"text\",\n    placeholder: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Submit\")));\n}\n\nexport default Phonebook;","map":{"version":3,"sources":["C:/Users/Gal/Documents/GitHub/fullstackOpen3-Exercises/client/src/Phonebook.js"],"names":["React","useEffect","useState","axios","Notification","Person","personService","Phonebook","book","setBook","name","setName","number","setNumber","showAll","setShowAll","errorMessage","setErrorMessage","fetch","data","get","getAll","then","initialPersons","addPerson","event","preventDefault","personObject","date","Date","toISOString","important","Math","random","id","notes","length","handleDelete","e","delete","target","handleSubmit","checkPerson","find","person","put","post","map","item","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Notification from './components/Notification'\r\nimport Person from './components/Person'\r\nimport personService from './services/persons'\r\n\r\n\r\nfunction Phonebook() {\r\n  const [book, setBook] = useState([]);\r\n  const [name, setName] = useState();\r\n  const [number, setNumber] = useState();\r\n\r\n  const [showAll, setShowAll] = useState(true)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n\r\n  const fetch = async () => {\r\n    const { data } = await axios.get('/api/persons')\r\n    setBook(data);\r\n  }\r\n\r\n//   useEffect(() => {\r\n//     fetch();\r\n//   }, [])\r\n\r\n    useEffect(() => {\r\n    personService.getAll().then(initialPersons => setBook(initialPersons))\r\n    // fetch();\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n        name: name,\r\n        date: new Date().toISOString(),\r\n        important: Math.random() > 0.5,\r\n        id: notes.length + 1,\r\n      }\r\n    \r\n  }\r\n  const handleDelete = (e) => {\r\n    axios.delete(`/api/persons/${e.target.id}`)\r\n    fetch();\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    const checkPerson = book.find(person => person.name === name)\r\n    if (checkPerson) {\r\n      await axios.put(`/api/persons/${checkPerson.id}`, {\r\n        name, \r\n        number\r\n      })\r\n    } else {\r\n      await axios.post('/api/persons', {\r\n        name, \r\n        number\r\n      })\r\n    }\r\n    fetch();\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Phone Book</h1>\r\n      <Notification message={errorMessage} />\r\n      <ul>\r\n        {book.map((item) => \r\n          <li key={item.id}> {item.id} {item.name} {item.number} <button id={item.id} onClick={handleDelete}>delete</button></li>\r\n        )}\r\n      </ul>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <input onChange={(e) => setName(e.target.value)} type='text' placeholder='name'/>\r\n        <input onChange={(e) => setNumber(e.target.value)} type='text' placeholder='number'/>\r\n        <button type='submit'>Submit</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Phonebook;"]},"metadata":{},"sourceType":"module"}