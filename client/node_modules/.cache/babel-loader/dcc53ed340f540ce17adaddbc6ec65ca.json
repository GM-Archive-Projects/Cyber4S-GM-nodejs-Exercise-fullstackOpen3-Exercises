{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gal\\\\Documents\\\\GitHub\\\\fullstackOpen3-Exercises\\\\client\\\\src\\\\Phonebook.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Notification from './components/Notification'; // import Note from './components/Note'\n// import noteService from './services/notes'\n\nfunction Phonebook() {\n  const [book, setBook] = useState([]);\n  const [name, setName] = useState();\n  const [number, setNumber] = useState();\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const fetch = async () => {\n    const {\n      data\n    } = await axios.get('/api/persons');\n    setBook(data);\n  };\n\n  useEffect(() => {\n    fetch();\n  }, []);\n\n  const handleDelete = e => {\n    axios.delete(`/api/persons/${e.target.id}`);\n    fetch();\n  };\n\n  const handleSubmit = async () => {\n    const checkPerson = book.find(person => person.name === name);\n\n    if (checkPerson) {\n      await axios.put(`/api/persons/${checkPerson.id}`, {\n        name,\n        number\n      });\n    } else {\n      await axios.post('/api/persons', {\n        name,\n        number\n      });\n    }\n\n    fetch();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, \"Phone Book\"), /*#__PURE__*/React.createElement(Notification, {\n    message: errorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, book.map((item, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, item.name, \" \", item.number, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    id: item.id,\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 49\n    }\n  }, \"delete\")))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setName(e.target.value),\n    type: \"text\",\n    placeholder: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setNumber(e.target.value),\n    type: \"text\",\n    placeholder: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Submit\")));\n}\n\nexport default Phonebook;","map":{"version":3,"sources":["C:/Users/Gal/Documents/GitHub/fullstackOpen3-Exercises/client/src/Phonebook.js"],"names":["React","useEffect","useState","axios","Notification","Phonebook","book","setBook","name","setName","number","setNumber","errorMessage","setErrorMessage","fetch","data","get","handleDelete","e","delete","target","id","handleSubmit","checkPerson","find","person","put","post","map","item","i","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Notification from './components/Notification'\r\n// import Note from './components/Note'\r\n// import noteService from './services/notes'\r\n\r\n\r\nfunction Phonebook() {\r\n  const [book, setBook] = useState([]);\r\n  const [name, setName] = useState();\r\n  const [number, setNumber] = useState();\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n\r\n  const fetch = async () => {\r\n    const { data } = await axios.get('/api/persons')\r\n    setBook(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetch();\r\n  }, [])\r\n\r\n  const handleDelete = (e) => {\r\n    axios.delete(`/api/persons/${e.target.id}`)\r\n    fetch();\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    const checkPerson = book.find(person => person.name === name)\r\n    if (checkPerson) {\r\n      await axios.put(`/api/persons/${checkPerson.id}`, {\r\n        name, \r\n        number\r\n      })\r\n    } else {\r\n      await axios.post('/api/persons', {\r\n        name, \r\n        number\r\n      })\r\n    }\r\n    fetch();\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Phone Book</h1>\r\n      <Notification message={errorMessage} />\r\n      <ul>\r\n        {book.map((item, i) => \r\n          <li key={i}>{item.name} {item.number} <button id={item.id} onClick={handleDelete}>delete</button></li>\r\n        )}\r\n      </ul>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <input onChange={(e) => setName(e.target.value)} type='text' placeholder='name'/>\r\n        <input onChange={(e) => setNumber(e.target.value)} type='text' placeholder='number'/>\r\n        <button type='submit'>Submit</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Phonebook;"]},"metadata":{},"sourceType":"module"}